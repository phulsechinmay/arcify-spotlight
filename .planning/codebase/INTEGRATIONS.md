# External Integrations

**Analysis Date:** 2026-02-03

## APIs & External Services

**Third-party APIs:**
- None detected - This is a self-contained extension with no external API integrations

**Browser Native APIs (Chrome Extension APIs):**
- Chrome Tabs API - Tab management, querying, activation, grouping
- Chrome Storage API (sync & local) - Settings persistence and data storage
- Chrome Bookmarks API - Bookmark folder management and operations
- Chrome History API - Historical data querying
- Chrome Search API - Search query functionality
- Chrome TopSites API - Frequently visited sites
- Chrome Commands API - Keyboard shortcut registration and handling
- Chrome Side Panel API - Sidebar panel behavior configuration
- Chrome Runtime API - Message passing between contexts, installation hooks
- Chrome Scripting API - Content script execution
- Chrome Alarms API - Scheduled tasks (auto-archive functionality)
- Chrome Context Menus API - Right-click menu items
- Chrome Tab Groups API - Tab group management

## Data Storage

**Databases:**
- None - Uses Chrome's built-in storage only

**Chrome Storage:**
- `chrome.storage.sync` - Synchronized settings across devices
  - Keys: `onboardingCompleted`, `enableSpotlight`, settings objects
  - Client: Native Chrome Storage API
  - Used by: Both arcify and spotlight extensions

- `chrome.storage.local` - Local data storage
  - Keys: `spaces`, `tabLastActivity`, `archivedTabs`
  - Used by: Background service worker, sidebar UI, overlay

**File Storage:**
- Bookmarks API (`chrome.bookmarks.*`) - Bookmark folder based storage for space persistence
  - Creates "Arcify" bookmark folder hierarchy
  - Location: `LocalStorage` module in `localstorage.js`
  - Used for: Space management, bookmark organization

**Favicon Cache:**
- `_favicon/` directory - Cached favicons for display
- Generated by extension, not fetched externally

## Authentication & Identity

**Auth Provider:**
- None - Chrome extension runs with implicit user authentication via browser context

**User Identity:**
- Implicit: Uses currently logged-in Chrome user via chrome.storage.sync
- No login required, no external identity provider

## Monitoring & Observability

**Error Tracking:**
- None detected - No external error tracking service

**Logs:**
- Local logging only via `Logger` module in `logger.js`
- Log level: Controlled by `debugLoggingEnabled` storage flag
- Output: Browser console (extension context)
- No remote logging detected

**Logger Configuration:**
```javascript
// Located in logger.js
// Logs to console with prefixes like [Background], [NewTab], [Sidebar]
// Respects debugLoggingEnabled flag from chrome.storage.sync
```

## Message Passing & IPC

**Internal Communication:**
- Chrome Runtime Message Passing (`chrome.runtime.sendMessage`)
- Bidirectional communication between:
  - Background service worker ↔ Content scripts
  - Background service worker ↔ Sidebar UI
  - Background service worker ↔ Options page
  - Overlay script ↔ New tab page

**Message Types:**
- Tab management commands: `toggleSpacePin`, `quickPinToggle`, `NextTabInSpace`, `PrevTabInSpace`
- URL operations: `copyCurrentUrl`, `urlCopySuccess`
- Navigation: `navigateToDefaultNewTab`
- Storage sync notifications: Handled via `chrome.storage.onChanged`

## Webhooks & Callbacks

**Incoming:**
- None detected - Extension does not expose webhooks

**Outgoing:**
- None detected - No external webhooks called

**Event Listeners:**
- `chrome.runtime.onInstalled` - Installation and update handling
- `chrome.runtime.onStartup` - Extension startup
- `chrome.storage.onChanged` - Storage synchronization
- `chrome.tabs.onActivated` - Tab activation tracking
- `chrome.tabs.onUpdated` - Tab update tracking (for activity timestamps)
- `chrome.tabs.onRemoved` - Tab removal tracking
- `chrome.alarms.onAlarm` - Auto-archive timer triggers
- `chrome.commands.onCommand` - Keyboard shortcut execution
- `chrome.contextMenus.onClicked` - Context menu interactions

## Content Script Communication

**Content Script Injection:**
- `overlay.js` - Injected as content script on all URLs
  - Run at: `document_start`
  - Purpose: Spotlight overlay on web pages

**Message Protocol:**
- Sends spotlight search queries to background service worker
- Receives tab and bookmark data for search results
- Handles user interactions on web pages

## Storage Schema

**Spaces (chrome.storage.local):**
```
spaces: {
  [spaceId]: {
    id: string,
    name: string,
    icon: string,
    color: string,
    tabs: Tab[],
    groupId: number,
    isPinned: boolean
  }
}
```

**Tab Activity Tracking (chrome.storage.local):**
```
tabLastActivity: {
  [tabId]: timestamp (milliseconds)
}
```

**Settings (chrome.storage.sync):**
```
{
  onboardingCompleted: boolean,
  enableSpotlight: boolean,
  autoArchiveEnabled: boolean,
  autoArchiveThresholdDays: number,
  debugLoggingEnabled: boolean
}
```

**Archived Tabs (chrome.storage.local):**
```
archivedTabs: [
  {
    id: string,
    title: string,
    url: string,
    favicon: string,
    archivedAt: timestamp
  }
]
// Limited to MAX_ARCHIVED_TABS = 100
```

## Permissions & Consent

**Manifest Permissions:**
- `tabs` - Tab management and querying
- `tabGroups` - Tab group operations
- `sidePanel` - Sidebar functionality
- `storage` - Data persistence
- `bookmarks` - Bookmark management
- `alarms` - Scheduled operations
- `commands` - Keyboard shortcuts
- `favicon` - Favicon retrieval
- `scripting` - Content script injection
- `clipboardWrite` - Copy to clipboard (arcify)
- `search` - Search functionality (spotlight)
- `topSites` - Frequently visited sites (spotlight)
- `history` - Historical data (spotlight)

**User Prompts:**
- Installation onboarding shown on first install and updates
- No additional runtime permissions requested

---

*Integration audit: 2026-02-03*
